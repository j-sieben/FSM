<!DOCTYPE html>

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>fsm_req.pks</title><link rel="stylesheet" type="text/css" href="../../../styles/main.css" /><script type="text/javascript" src="../../../styles/main.js"></script><script type="text/javascript">NDLoader.LoadJS("Content", "../../../styles/");</script></head>

<!-- Generated by Natural Docs, version 2.2 -->

<!-- saved from url=(0016)http://localhost -->

<body onload="NDLoader.OnLoad('Content');" class="NDPage NDContentPage">

<a name="FSM_REQ"></a><a name="Topic6"></a><div class="CTopic TClass LSQL first">
 <div class="CTitle">FSM_REQ</div>
 <div class="CBody"><p>Package to implement the FSM related logic for requests</p><div class="CHeading">Author</div><p>Juergen Sieben, ConDeS GmbH</p></div>
</div>

<a name="FSM_REQ.Functions"></a><a name="Topic7"></a><div class="CTopic TGroup LSQL">
 <div class="CTitle">Functions</div>
</div>

<a name="FSM_REQ.create_fsm_req"></a><a name="Topic8"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">create_fsm_req</div>
 <div id="NDPrototype8" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">procedure</span> create_fsm_req(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_req&nbsp;</td><td class="PType"><span class="SHKeyword">in out nocopy</span> fsm_req_type,</td><td></td><td class="last"></td></tr><tr><td class="PName first">p_req_id&nbsp;</td><td class="PType"><span class="SHKeyword">in</span> fsm_requests.req_id<span class="SHKeyword">%type</span></td><td class="PDefaultValueSeparator">&nbsp;<span class="SHKeyword">default</span>&nbsp;</td><td class="PDefaultValue last"><span class="SHKeyword">null</span>,</td></tr><tr><td class="PName first">p_req_fst_id&nbsp;</td><td class="PType"><span class="SHKeyword">in</span> fsm_status_v.fst_id<span class="SHKeyword">%type</span></td><td class="PDefaultValueSeparator">&nbsp;<span class="SHKeyword">default</span>&nbsp;</td><td class="PDefaultValue last">fsm_fst.REQ_CREATED,</td></tr><tr><td class="PName first">p_req_fev_list&nbsp;</td><td class="PType"><span class="SHKeyword">in</span> fsm_events_v.fev_id<span class="SHKeyword">%type</span></td><td class="PDefaultValueSeparator">&nbsp;<span class="SHKeyword">default</span>&nbsp;</td><td class="PDefaultValue last"><span class="SHKeyword">null</span>,</td></tr><tr><td class="PName first">p_req_rtp_id&nbsp;</td><td class="PType"><span class="SHKeyword">in</span> fsm_request_types.rtp_id<span class="SHKeyword">%type</span>,</td><td></td><td class="last"></td></tr><tr><td class="PName first">p_req_rre_id&nbsp;</td><td class="PType"><span class="SHKeyword">in</span> fsm_requestors.rre_id<span class="SHKeyword">%type</span>,</td><td></td><td class="last"></td></tr><tr><td class="PName first">p_req_text&nbsp;</td><td class="PType"><span class="SHKeyword">in</span> fsm_requests.req_text<span class="SHKeyword">%type</span></td><td></td><td class="last"></td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Is called from FSM_REQ_TYPE constructor function to create a new instance of FSM_REQ_TYPE</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">p_req<div class="CDLParameterType"><span class="SHKeyword">in out nocopy</span> fsm_req_type</div></td><td class="CDLDefinition"><p>instance of FSM_REQ_TYPE to be created</p></td></tr><tr><td class="CDLEntry">p_req_id<div class="CDLParameterType"><span class="SHKeyword">in</span> fsm_requests.req_id<span class="SHKeyword">%type</span></div></td><td class="CDLDefinition"><p>ID of the request</p></td></tr><tr><td class="CDLEntry">p_req_fst_id<div class="CDLParameterType"><span class="SHKeyword">in</span> fsm_status_v.fst_id<span class="SHKeyword">%type</span></div></td><td class="CDLDefinition"><p>Status of the request, reference to FSM_STATUS</p></td></tr><tr><td class="CDLEntry">p_req_fev_list<div class="CDLParameterType"><span class="SHKeyword">in</span> fsm_events_v.fev_id<span class="SHKeyword">%type</span></div></td><td class="CDLDefinition"><p>List of allowed events</p></td></tr><tr><td class="CDLEntry">p_req_rtp_id<div class="CDLParameterType"><span class="SHKeyword">in</span> fsm_request_types.rtp_id<span class="SHKeyword">%type</span></div></td><td class="CDLDefinition"><p>type of the request, reference to FSM_REQ_TYPE</p></td></tr><tr><td class="CDLEntry">p_req_rre_id<div class="CDLParameterType"><span class="SHKeyword">in</span> fsm_requestors.rre_id<span class="SHKeyword">%type</span></div></td><td class="CDLDefinition"><p>requesting person, rerefence to FSM_requestors</p></td></tr><tr><td class="CDLEntry">p_req_text<div class="CDLParameterType"><span class="SHKeyword">in</span> fsm_requests.req_text<span class="SHKeyword">%type</span></div></td><td class="CDLDefinition"><p>request text</p></td></tr></table></div>
</div>

<a name="FSM_REQ.create_fsm_req(2)"></a><a name="Topic9"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">create_fsm_req</div>
 <div id="NDPrototype9" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">procedure</span> create_fsm_req(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_req&nbsp;</td><td class="PType last"><span class="SHKeyword">in out nocopy</span> fsm_req_type,</td></tr><tr><td class="PName first">p_req_id&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> fsm_requests.req_id<span class="SHKeyword">%type</span></td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Overlaod to re-create an already persisted instance from FSM_REQUESTS</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">p_req<div class="CDLParameterType"><span class="SHKeyword">in out nocopy</span> fsm_req_type</div></td><td class="CDLDefinition"><p>instance of FSM_REQ_TYPE to be re-created</p></td></tr><tr><td class="CDLEntry">p_req_id<div class="CDLParameterType"><span class="SHKeyword">in</span> fsm_requests.req_id<span class="SHKeyword">%type</span></div></td><td class="CDLDefinition"><p>ID of the existing request</p></td></tr></table></div>
</div>

<a name="FSM_REQ.persist_request"></a><a name="Topic10"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">persist_request</div>
 <div id="NDPrototype10" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">procedure</span> persist_request(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_req_id&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> <span class="SHKeyword">number</span>,</td></tr><tr><td class="PName first">p_req_rtp_id&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span>,</td></tr><tr><td class="PName first">p_req_rre_id&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span>,</td></tr><tr><td class="PName first">p_req_text&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span></td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Method that persists a request without the need to create an instance of FSM_REQ_TYPE upfront. Instead, this is handled within this method. Is called if an application wants to store or edit a request.</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">p_req_id<div class="CDLParameterType"><span class="SHKeyword">in</span> <span class="SHKeyword">number</span></div></td><td class="CDLDefinition"><p>ID of the request</p></td></tr><tr><td class="CDLEntry">p_req_rtp_id<div class="CDLParameterType"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span></div></td><td class="CDLDefinition"><p>Reference to the request type</p></td></tr><tr><td class="CDLEntry">p_req_rre_id<div class="CDLParameterType"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span></div></td><td class="CDLDefinition"><p>Reference to the requestor</p></td></tr><tr><td class="CDLEntry">p_req_text<div class="CDLParameterType"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span></div></td><td class="CDLDefinition"><p>Request in textual form</p></td></tr></table></div>
</div>

<a name="FSM_REQ.raise_event"></a><a name="Topic11"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">raise_event</div>
 <div id="NDPrototype11" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">function</span> raise_event(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_req&nbsp;</td><td class="PType last"><span class="SHKeyword">in out nocopy</span> fsm_req_type,</td></tr><tr><td class="PName first">p_fev_id&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> fsm_events_v.fev_id<span class="SHKeyword">%type</span></td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div><div class="PSection PPlainSection"><span class="SHKeyword">return</span> binary_integer</div></div>
 <div class="CBody"><p>Method to manually raise an event. This method is called if an event has to be called manually for a given instance of FSM_REQ_TYPE. Calling an event can be accomplished by calling this method manually, from a button or from a database job fi.</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">p_req<div class="CDLParameterType"><span class="SHKeyword">in out nocopy</span> fsm_req_type</div></td><td class="CDLDefinition"><p>instance of type FSM_REQ_TYPE</p></td></tr><tr><td class="CDLEntry">p_fev_id<div class="CDLParameterType"><span class="SHKeyword">in</span> fsm_events_v.fev_id<span class="SHKeyword">%type</span></div></td><td class="CDLDefinition"><p>Event to raise. Reference to FSM_EVENT</p></td></tr></table><div class="CHeading">Returns</div><p>Status code on whether the event could be raised successfully. One of the constants FSM.C_OK or FSM.C_ERROR or a retry counter value.</p></div>
</div>

<a name="FSM_REQ.raise_event(2)"></a><a name="Topic12"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">raise_event</div>
 <div id="NDPrototype12" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">procedure</span> raise_event(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_req_id&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> fsm_objects_v.fsm_id<span class="SHKeyword">%type</span>,</td></tr><tr><td class="PName first">p_fev_id&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> fsm_events_v.fev_id<span class="SHKeyword">%type</span></td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Method to wrap the creation of an fsm_req_type in order to throw an event on it.</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">p_req_id<div class="CDLParameterType"><span class="SHKeyword">in</span> fsm_objects_v.fsm_id<span class="SHKeyword">%type</span></div></td><td class="CDLDefinition"><p>ID of an existing FSM_REQ_TYPE instance</p></td></tr><tr><td class="CDLEntry">p_fev_id<div class="CDLParameterType"><span class="SHKeyword">in</span> fsm_events_v.fev_id<span class="SHKeyword">%type</span></div></td><td class="CDLDefinition"><p>Event to raise. Reference to FSM_EVENT</p></td></tr></table></div>
</div>

<a name="FSM_REQ.set_status"></a><a name="Topic13"></a><div class="CTopic TFunction LSQL last">
 <div class="CTitle">set_status</div>
 <div id="NDPrototype13" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">function</span> set_status(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_req&nbsp;</td><td class="PType last"><span class="SHKeyword">in out nocopy</span> fsm_req_type</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div><div class="PSection PPlainSection"><span class="SHKeyword">return</span> binary_integer</div></div>
 <div class="CBody"><p>Method to set a new status. Is called from an event handler that has calculated the new status.</p><div class="CHeading">Parameter</div><table class="CDefinitionList"><tr><td class="CDLEntry">p_req<div class="CDLParameterType"><span class="SHKeyword">in out nocopy</span> fsm_req_type</div></td><td class="CDLDefinition"><p>instance of type FSM_REQ_TYPE</p></td></tr></table><div class="CHeading">Returns</div><p>Status code on whether the event could be raised successfully. One of the constants FSM.C_OK or FSM.C_ERROR or a retry counter value.</p></div>
</div>

</body></html>