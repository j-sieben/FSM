<!DOCTYPE html>

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>FSM Body</title><link rel="stylesheet" type="text/css" href="../../styles/main.css" /><script type="text/javascript" src="../../styles/main.js"></script><script type="text/javascript">NDLoader.LoadJS("Content", "../../styles/");</script></head>

<!-- Generated by Natural Docs, version 2.2 -->

<!-- saved from url=(0016)http://localhost -->

<body onload="NDLoader.OnLoad('Content');" class="NDPage NDContentPage">

<a name="Topic126"></a><div class="CTopic TClass LSQL first">
 <div class="CTitle">FSM Body</div>
 <div class="CBody"><p>Implementation of the FSM package</p><div class="CHeading">Author</div><p>Juergen Sieben, ConDeS GmbH</p><p>Published under MIT licence</p></div>
</div>

<a name="Private_methods"></a><a name="Topic127"></a><div class="CTopic TGroup LSQL">
 <div class="CTitle">Private methods</div>
</div>

<a name="persist_retry"></a><a name="Topic128"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">persist_retry</div>
 <div id="NDPrototype128" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">procedure</span> persist_retry(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_fsm&nbsp;</td><td class="PType last"><span class="SHKeyword">in out nocopy</span> fsm_type,</td></tr><tr><td class="PName first">p_retry_schedule&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> fsm_objects.fsm_retry_schedule<span class="SHKeyword">%type</span></td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Method persists retry of a FSM instance to achieve a new status.&nbsp; Is called when a FSM instance could not achieve a new status and retries to reach it.</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">p_fsm<div class="CDLParameterType"><span class="SHKeyword">in out nocopy</span> fsm_type</div></td><td class="CDLDefinition"><p>FSM instance</p></td></tr><tr><td class="CDLEntry">p_retry_schedule<div class="CDLParameterType"><span class="SHKeyword">in</span> fsm_objects.fsm_retry_schedule<span class="SHKeyword">%type</span></div></td><td class="CDLDefinition"><p>Schedule to be used for the next retry</p></td></tr></table></div>
</div>

<a name="proceed_with_error_event"></a><a name="Topic129"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">proceed_with_error_event</div>
 <div id="NDPrototype129" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">procedure</span> proceed_with_error_event(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_fsm&nbsp;</td><td class="PType last"><span class="SHKeyword">in out nocopy</span> fsm_type</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Method stops retriggering an event and sets the instance to error status.&nbsp; As no retry is allowed, the method examines the metadata to find transitions that have to be executed in case of error.&nbsp; If no transition is found, it will use a generic FSM_ERROR event.</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">p_fsm<div class="CDLParameterType"><span class="SHKeyword">in out nocopy</span> fsm_type</div></td><td class="CDLDefinition"><p>FSM instance</p></td></tr></table></div>
</div>

<a name="log_change"></a><a name="Topic130"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">log_change</div>
 <div id="NDPrototype130" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">procedure</span> log_change(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_fsm&nbsp;</td><td class="PType"><span class="SHKeyword">in out nocopy</span> fsm_type,</td><td></td><td class="last"></td></tr><tr><td class="PName first">p_fev_id&nbsp;</td><td class="PType"><span class="SHKeyword">in</span> fsm_events_v.fev_id<span class="SHKeyword">%type</span></td><td class="PDefaultValueSeparator">&nbsp;<span class="SHKeyword">default</span>&nbsp;</td><td class="PDefaultValue last"><span class="SHKeyword">null</span>,</td></tr><tr><td class="PName first">p_fst_id&nbsp;</td><td class="PType"><span class="SHKeyword">in</span> fsm_status.fst_id<span class="SHKeyword">%type</span></td><td class="PDefaultValueSeparator">&nbsp;<span class="SHKeyword">default</span>&nbsp;</td><td class="PDefaultValue last"><span class="SHKeyword">null</span>,</td></tr><tr><td class="PName first">p_msg&nbsp;</td><td class="PType"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span></td><td class="PDefaultValueSeparator">&nbsp;<span class="SHKeyword">default</span>&nbsp;</td><td class="PDefaultValue last"><span class="SHKeyword">null</span>,</td></tr><tr><td class="PName first">p_msg_args&nbsp;</td><td class="PType"><span class="SHKeyword">in</span> msg_args</td><td class="PDefaultValueSeparator">&nbsp;<span class="SHKeyword">default</span>&nbsp;</td><td class="PDefaultValue last"><span class="SHKeyword">null</span></td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Method to maintain FSM_LOG. Called to log status changes, events and notifications from FSM</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">p_fsm<div class="CDLParameterType"><span class="SHKeyword">in out nocopy</span> fsm_type</div></td><td class="CDLDefinition"><p>FSM instance</p></td></tr><tr><td class="CDLEntry">p_fev_id<div class="CDLParameterType"><span class="SHKeyword">in</span> fsm_events_v.fev_id<span class="SHKeyword">%type</span></div></td><td class="CDLDefinition"><p>Optional event that was triggered</p></td></tr><tr><td class="CDLEntry">p_fst_id<div class="CDLParameterType"><span class="SHKeyword">in</span> fsm_status.fst_id<span class="SHKeyword">%type</span></div></td><td class="CDLDefinition"><p>Optional new status that was taken</p></td></tr><tr><td class="CDLEntry">p_msg<div class="CDLParameterType"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span></div></td><td class="CDLDefinition"><p>Optional ID of a message from PIT</p></td></tr><tr><td class="CDLEntry">p_msg_args<div class="CDLParameterType"><span class="SHKeyword">in</span> msg_args</div></td><td class="CDLDefinition"><p>Optional MSG_ARGS instance with message parameters</p></td></tr></table></div>
</div>

<a name="Interface"></a><a name="Topic131"></a><div class="CTopic TGroup LSQL">
 <div class="CTitle">Interface</div>
</div>

<a name="drop_object"></a><a name="Topic132"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">drop_object</div>
 <div id="NDPrototype132" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">procedure</span> drop_object(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_fsm_id&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> fsm_objects_v.fsm_id<span class="SHKeyword">%type</span></td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>See&nbsp; <a href="../../index.html#SQLClass:FSM:drop_object" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,100);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >FSM.drop_object</a></p></div>
</div>

<a name="persist"></a><a name="Topic133"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">persist</div>
 <div id="NDPrototype133" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">procedure</span> persist(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_fsm&nbsp;</td><td class="PType last"><span class="SHKeyword">in out nocopy</span> fsm_type</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>See&nbsp; <a href="../../index.html#SQLClass:FSM:persist" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,103);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >FSM.persist</a></p></div>
</div>

<a name="raise_event"></a><a name="Topic134"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">raise_event</div>
 <div id="NDPrototype134" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">function</span> raise_event(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_fsm&nbsp;</td><td class="PType last"><span class="SHKeyword">in out nocopy</span> fsm_type,</td></tr><tr><td class="PName first">p_fev_id&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> fsm_events_v.fev_id<span class="SHKeyword">%type</span></td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div><div class="PSection PPlainSection"><span class="SHKeyword">return</span> <span class="SHKeyword">integer</span></div></div>
 <div class="CBody"><p>See&nbsp; <a href="../../index.html#SQLClass:FSM:raise_event" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,102);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >FSM.raise_event</a></p></div>
</div>

<a name="retry"></a><a name="Topic135"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">retry</div>
 <div id="NDPrototype135" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">procedure</span> retry(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_fsm&nbsp;</td><td class="PType last"><span class="SHKeyword">in out nocopy</span> fsm_type,</td></tr><tr><td class="PName first">p_fev_id&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> fsm_events_v.fev_id<span class="SHKeyword">%type</span></td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>See&nbsp; <a href="../../index.html#SQLClass:FSM:retry" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,104);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >FSM.retry</a></p></div>
</div>

<a name="allows_event"></a><a name="Topic136"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">allows_event</div>
 <div id="NDPrototype136" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">function</span> allows_event(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_fsm&nbsp;</td><td class="PType last"><span class="SHKeyword">in out nocopy</span> fsm_type,</td></tr><tr><td class="PName first">p_fev_id&nbsp;</td><td class="PType last">fsm_events_v.fev_id<span class="SHKeyword">%type</span></td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div><div class="PSection PPlainSection"><span class="SHKeyword">return</span> <span class="SHKeyword">boolean</span></div></div>
 <div class="CBody"><p>See&nbsp; <a href="../../index.html#SQLClass:FSM:allows_event" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,105);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >FSM.allows_event</a></p></div>
</div>

<a name="set_status"></a><a name="Topic137"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">set_status</div>
 <div id="NDPrototype137" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">function</span> set_status(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_fsm&nbsp;</td><td class="PType last"><span class="SHKeyword">in out nocopy</span> fsm_type</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div><div class="PSection PPlainSection"><span class="SHKeyword">return</span> <span class="SHKeyword">number</span></div></div>
 <div class="CBody"><p>See&nbsp; <a href="../../index.html#SQLClass:FSM:set_status" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,106);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >FSM.set_status</a></p></div>
</div>

<a name="set_status(2)"></a><a name="Topic138"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">set_status</div>
 <div id="NDPrototype138" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">procedure</span> set_status(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_fsm&nbsp;</td><td class="PType last"><span class="SHKeyword">in out nocopy</span> fsm_type</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>See&nbsp; <a href="../../index.html#SQLClass:FSM:set_status" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,106);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >FSM.set_status</a></p></div>
</div>

<a name="get_next_status"></a><a name="Topic139"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">get_next_status</div>
 <div id="NDPrototype139" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">function</span> get_next_status(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_fsm&nbsp;</td><td class="PType last"><span class="SHKeyword">in out nocopy</span> fsm_type,</td></tr><tr><td class="PName first">p_fev_id&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> fsm_events_v.fev_id<span class="SHKeyword">%type</span></td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div><div class="PSection PPlainSection"><span class="SHKeyword">return</span> <span class="SHKeyword">varchar2</span></div></div>
 <div class="CBody"><p>See&nbsp; <a href="../../index.html#SQLClass:FSM:get_next_status" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,108);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >FSM.get_next_status</a></p></div>
</div>

<a name="notify"></a><a name="Topic140"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">notify</div>
 <div id="NDPrototype140" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">procedure</span> notify(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_fsm&nbsp;</td><td class="PType last"><span class="SHKeyword">in out nocopy</span> fsm_type,</td></tr><tr><td class="PName first">p_msg&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> pit_util.ora_name_type,</td></tr><tr><td class="PName first">p_msg_args&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> msg_args</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>See&nbsp; <a href="../../index.html#SQLClass:FSM:notify" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,109);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >FSM.notify</a></p></div>
</div>

<a name="to_string"></a><a name="Topic141"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">to_string</div>
 <div id="NDPrototype141" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">function</span> to_string(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_fsm&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> fsm_type</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div><div class="PSection PPlainSection"><span class="SHKeyword">return</span> <span class="SHKeyword">varchar2</span></div></div>
 <div class="CBody"><p>See&nbsp; <a href="../../index.html#SQLClass:FSM:to_string" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,110);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >FSM.to_string</a></p></div>
</div>

<a name="finalize"></a><a name="Topic142"></a><div class="CTopic TFunction LSQL last">
 <div class="CTitle">finalize</div>
 <div id="NDPrototype142" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">procedure</span> finalize(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_fsm&nbsp;</td><td class="PType last">fsm_type</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>See&nbsp; <a href="../../index.html#SQLClass:FSM:finalize" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,111);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >FSM.finalize</a></p></div>
</div>

</body></html>