<!DOCTYPE html>

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>FSM</title><link rel="stylesheet" type="text/css" href="../../styles/main.css" /><script type="text/javascript" src="../../styles/main.js"></script><script type="text/javascript">NDLoader.LoadJS("Content", "../../styles/");</script></head>

<!-- Generated by Natural Docs, version 2.2 -->

<!-- saved from url=(0016)http://localhost -->

<body onload="NDLoader.OnLoad('Content');" class="NDPage NDContentPage">

<a name="Topic91"></a><div class="CTopic TClass LSQL first">
 <div class="CTitle">FSM</div>
 <div class="CBody"><p>Implements core functionality of the Finite State Machine.&nbsp; The package contains the implementation of the abstract class FSM_TYPE and provides generic functions for logging and administration of events and status changes.</p><p>It serves as a foundation for concrete FSM classes which implement event handlers for the real problem domain. By separating the functionality it is assured that all these concrete FSM classes share a common way of logging and traversing through the different states.</p><div class="CHeading">Author</div><p>Juergen Sieben, ConDeS GmbH</p><p>Published under MIT licence</p></div>
</div>

<a name="Public_Types"></a><a name="Topic92"></a><div class="CTopic TGroup LSQL">
 <div class="CTitle">Public Types</div>
</div>

<a name="PL/SQL_subtypes"></a><a name="Topic93"></a><div class="CTopic TType LSQL">
 <div class="CTitle">PL/SQL subtypes</div>
 <div class="CBody"><table class="CDefinitionList"><tr><td class="CDLEntry"><a name="ora_name_type"></a><a name="Topic94"></a>ora_name_type</td><td class="CDLDefinition"><p>Oracle name type, length depends on database version: since 12c: 128 byte.</p></td></tr><tr><td class="CDLEntry"><a name="flag_type"></a><a name="Topic95"></a>flag_type</td><td class="CDLDefinition"><p>Boolean type for SQL usage. May be obsolete once version 23c can be assumed.</p></td></tr><tr><td class="CDLEntry"><a name="max_char"></a><a name="Topic96"></a>max_char</td><td class="CDLDefinition"><p>Maximum varchar2 PL/SQL variable width</p></td></tr><tr><td class="CDLEntry"><a name="max_sql_char"></a><a name="Topic97"></a>max_sql_char</td><td class="CDLDefinition"><p>Maximum varchar2 SQL width</p></td></tr></table></div>
</div>

<a name="Object_maintenance"></a><a name="Topic99"></a><div class="CTopic TGroup LSQL">
 <div class="CTitle">Object maintenance</div>
</div>

<a name="drop_object"></a><a name="Topic100"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">drop_object</div>
 <div id="NDPrototype100" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">procedure</span> drop_object(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_fsm_id&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> fsm_objects_v.fsm_id<span class="SHKeyword">%type</span></td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Method to remove an existing FSM object</p><div class="CHeading">Parameter</div><table class="CDefinitionList"><tr><td class="CDLEntry">p_fsm_id<div class="CDLParameterType"><span class="SHKeyword">in</span> fsm_objects_v.fsm_id<span class="SHKeyword">%type</span></div></td><td class="CDLDefinition"><p>ID of the FSM object to drop</p></td></tr></table></div>
</div>

<a name="FSM_TYPE_method_implementations"></a><a name="Topic101"></a><div class="CTopic TGroup LSQL">
 <div class="CTitle">FSM_TYPE method implementations</div>
</div>

<a name="raise_event"></a><a name="Topic102"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">raise_event</div>
 <div id="NDPrototype102" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">function</span> raise_event(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_fsm&nbsp;</td><td class="PType last"><span class="SHKeyword">in out nocopy</span> fsm_type,</td></tr><tr><td class="PName first">p_fev_id&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> fsm_events_v.fev_id<span class="SHKeyword">%type</span></td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div><div class="PSection PPlainSection"><span class="SHKeyword">return</span> <span class="SHKeyword">integer</span></div></div>
 <div class="CBody"><p>On an abstract level this methods only task is to take care of logging.&nbsp; Is called by the corresponding function of type FSM_TYPE.</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">p_fsm<div class="CDLParameterType"><span class="SHKeyword">in out nocopy</span> fsm_type</div></td><td class="CDLDefinition"><p>Instance of the class FSM_TYPE</p></td></tr><tr><td class="CDLEntry">p_fev_id<div class="CDLParameterType"><span class="SHKeyword">in</span> fsm_events_v.fev_id<span class="SHKeyword">%type</span></div></td><td class="CDLDefinition"><p>Event that was triggered</p></td></tr></table><div class="CHeading">Returns</div><p>C_OK or C_ERROR. C_ERROR only if no logging is performed</p></div>
</div>

<a name="persist"></a><a name="Topic103"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">persist</div>
 <div id="NDPrototype103" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">procedure</span> persist(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_fsm&nbsp;</td><td class="PType last"><span class="SHKeyword">in out nocopy</span> fsm_type</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Method persists FSM_TYPE attributes of a concrete derived class in FSM_OBJECT.&nbsp; Called by the constructors of the derived classes to to create an entry in FSM_OBJECT.&nbsp; If available, attributes are updated, otherwise the class is created again.</p><div class="CHeading">Parameter</div><table class="CDefinitionList"><tr><td class="CDLEntry">p_fsm<div class="CDLParameterType"><span class="SHKeyword">in out nocopy</span> fsm_type</div></td><td class="CDLDefinition"><p>FSM_TYPE instance</p></td></tr></table></div>
</div>

<a name="retry"></a><a name="Topic104"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">retry</div>
 <div id="NDPrototype104" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">procedure</span> retry(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_fsm&nbsp;</td><td class="PType last"><span class="SHKeyword">in out nocopy</span> fsm_type,</td></tr><tr><td class="PName first">p_fev_id&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> fsm_events_v.fev_id<span class="SHKeyword">%type</span></td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Method called when an event produces an error.&nbsp; It checks if the event can be executed again (possibly based on a schedule) If positive, it throws the event again. If not, the FSM is set to status ERROR.</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">p_fsm<div class="CDLParameterType"><span class="SHKeyword">in out nocopy</span> fsm_type</div></td><td class="CDLDefinition"><p>FSM_TYPE instance</p></td></tr><tr><td class="CDLEntry">p_fev_id<div class="CDLParameterType"><span class="SHKeyword">in</span> fsm_events_v.fev_id<span class="SHKeyword">%type</span></div></td><td class="CDLDefinition"><p>Event that has received an error.</p></td></tr></table></div>
</div>

<a name="allows_event"></a><a name="Topic105"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">allows_event</div>
 <div id="NDPrototype105" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">function</span> allows_event(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_fsm&nbsp;</td><td class="PType last"><span class="SHKeyword">in out nocopy</span> fsm_type,</td></tr><tr><td class="PName first">p_fev_id&nbsp;</td><td class="PType last">fsm_events_v.fev_id<span class="SHKeyword">%type</span></td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div><div class="PSection PPlainSection"><span class="SHKeyword">return</span> <span class="SHKeyword">boolean</span></div></div>
 <div class="CBody"><p>Method checks if an fsm allows an event to be searched for.&nbsp; Called by APEX application to check whether a control should be displayed or executed</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">p_fsm<div class="CDLParameterType"><span class="SHKeyword">in out nocopy</span> fsm_type</div></td><td class="CDLDefinition"><p>fsm instance</p></td></tr><tr><td class="CDLEntry">p_fev_id<div class="CDLParameterType">fsm_events_v.fev_id<span class="SHKeyword">%type</span></div></td><td class="CDLDefinition"><p>Event that is checked</p></td></tr></table><div class="CHeading">Returns</div><p>Flag which indicates whether the searched event is allowed (TRUE) or not (FALSE)</p></div>
</div>

<a name="set_status"></a><a name="Topic106"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">set_status</div>
 <div id="NDPrototype106" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">function</span> set_status(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_fsm&nbsp;</td><td class="PType last"><span class="SHKeyword">in out nocopy</span> fsm_type</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div><div class="PSection PPlainSection"><span class="SHKeyword">return</span> <span class="SHKeyword">number</span></div></div>
 <div class="CBody"><p>Method sets the status of an FSM instance. Overloaded as procedure.&nbsp; A new status is determined by the logic of the event handler or by calling GET_NEXT_STATUS.&nbsp; Based on the new status, allowed events are determined.&nbsp; If the following event is automatic, it will be triggered immediately, otherwise FSM waits for the event to be triggered externally.&nbsp; The procedure overload sets validity at the FSM instance attribute only.</p><div class="CHeading">Parameter</div><table class="CDefinitionList"><tr><td class="CDLEntry">p_fsm<div class="CDLParameterType"><span class="SHKeyword">in out nocopy</span> fsm_type</div></td><td class="CDLDefinition"><p>Instance of fsm (concrete class of the type inherited from FSM_TYPE)</p></td></tr></table><div class="CHeading">Returns</div><p>Success state.</p><table class="CDefinitionList"><tr><td class="CDLEntry">C_OK</td><td class="CDLDefinition"><p>Normal execution</p></td></tr><tr><td class="CDLEntry">C_ERROR</td><td class="CDLDefinition"><p>Error</p></td></tr><tr><td class="CDLEntry">Integer &gt; 1</td><td class="CDLDefinition"><p>In case of error this indicates the amount of allowed repetitions.&nbsp; Is decreased by 1 for each repetition, until C_ERROR</p></td></tr></table></div>
</div>

<a name="set_status(2)"></a><a name="Topic107"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">set_status</div>
 <div id="NDPrototype107" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">procedure</span> set_status(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_fsm&nbsp;</td><td class="PType last"><span class="SHKeyword">in out nocopy</span> fsm_type</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Procedure overload See <a href="../../index.html#SQLClass:FSM:set_status" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,106);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >FSM.set_status</a></p></div>
</div>

<a name="get_next_status"></a><a name="Topic108"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">get_next_status</div>
 <div id="NDPrototype108" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">function</span> get_next_status(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_fsm&nbsp;</td><td class="PType last"><span class="SHKeyword">in out nocopy</span> fsm_type,</td></tr><tr><td class="PName first">p_fev_id&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> fsm_events_v.fev_id<span class="SHKeyword">%type</span></td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div><div class="PSection PPlainSection"><span class="SHKeyword">return</span> <span class="SHKeyword">varchar2</span></div></div>
 <div class="CBody"><p>Method to determine the next possible status. Is called to determine the next state based on the transitions given.&nbsp; If there is no next state, an error is thrown, because this is caused by a wrong parameterization.&nbsp; A call is only possible if there is at most one transition to one next state.&nbsp; If more than one status can be reached, the status must be determined by logic and set directly.</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">p_fsm<div class="CDLParameterType"><span class="SHKeyword">in out nocopy</span> fsm_type</div></td><td class="CDLDefinition"><p>Instance of type FSM_TYPE</p></td></tr><tr><td class="CDLEntry">p_fev_id<div class="CDLParameterType"><span class="SHKeyword">in</span> fsm_events_v.fev_id<span class="SHKeyword">%type</span></div></td><td class="CDLDefinition"><p>Event that was raised</p></td></tr></table><div class="CHeading">Returns</div><p>Name of the next status</p></div>
</div>

<a name="notify"></a><a name="Topic109"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">notify</div>
 <div id="NDPrototype109" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">procedure</span> notify(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_fsm&nbsp;</td><td class="PType last"><span class="SHKeyword">in out nocopy</span> fsm_type,</td></tr><tr><td class="PName first">p_msg&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> pit_util.ora_name_type,</td></tr><tr><td class="PName first">p_msg_args&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> msg_args</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Method saves a note to an fsm instance. The procedure is called during processing to add annotations.</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">p_fsm<div class="CDLParameterType"><span class="SHKeyword">in out nocopy</span> fsm_type</div></td><td class="CDLDefinition"><p>Instance of FSM_TYPE to which a note is to be saved</p></td></tr><tr><td class="CDLEntry">p_msg<div class="CDLParameterType"><span class="SHKeyword">in</span> pit_util.ora_name_type</div></td><td class="CDLDefinition"><p>Reference to MSG, will be created as message</p></td></tr><tr><td class="CDLEntry">p_msg_args<div class="CDLParameterType"><span class="SHKeyword">in</span> msg_args</div></td><td class="CDLDefinition"><p>MSG_ARGS instance</p></td></tr></table></div>
</div>

<a name="to_string"></a><a name="Topic110"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">to_string</div>
 <div id="NDPrototype110" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">function</span> to_string(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_fsm&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> fsm_type</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div><div class="PSection PPlainSection"><span class="SHKeyword">return</span> <span class="SHKeyword">varchar2</span></div></div>
 <div class="CBody"><p>Method to convert the object into a string. Is used to get an overview of the class attributes.</p><div class="CHeading">Parameter</div><table class="CDefinitionList"><tr><td class="CDLEntry">p_fsm<div class="CDLParameterType"><span class="SHKeyword">in</span> fsm_type</div></td><td class="CDLDefinition"><p>FSM-instance to be converted</p></td></tr></table><div class="CHeading">Returns</div><p>String with the relevant class attributes</p></div>
</div>

<a name="finalize"></a><a name="Topic111"></a><div class="CTopic TFunction LSQL last">
 <div class="CTitle">finalize</div>
 <div id="NDPrototype111" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">procedure</span> finalize(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_fsm&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> fsm_type</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>&quot;Destructor&quot;, cleans up the object</p></div>
</div>

</body></html>